# sql_practice

このフォルダは、Django ORM 学習を補助するために
**Python 直書き SQL（raw SQL）を学習・検証するための専用領域**です。

---

## 目的

- Django ORM が内部でどのような SQL を発行しているのかを理解する
- ORM と 生SQL を **同じデータベース・同じテーブル**で比較する
- Python + DB API（sqlite3）による SQL 実行の基礎を身につける
- 将来、ORM と SQL を適切に使い分けるための判断軸を作る

---

## 前提・重要な注意点

- このフォルダは **学習用** であり、本番コードではない
- Django の app（pages/）とは **意図的に分離**している
- ORM と SQL を **同一ファイル・同一責務で混在させない**
- 本番 Django では、SQL は各 app 配下（repository 層）に配置する想定

---

## 構成と役割

このフォルダ内の各ファイルは、
**「Django ORM を理解するための SQL 復習」**という
本フェーズの目的に合わせて、役割を限定している。

この段階では SQL を深掘りせず、
ORM と SQL の対応関係を確認することを最優先とする。

---

- `raw_connection.py`
  SQLite（db.sqlite3）に直接接続するための最小ユーティリティ。
  Django ORM の代替として使うのではなく、
  **ORM が発行している SQL を確認・翻訳するための補助**としてのみ利用する。

- `select_basic.py`
  SELECT 文の基礎確認用。
  Django ORM の `.all() / .filter() / .order_by() / [:N]` などを
  **SQLに翻訳して理解すること**を目的とする。
  このフェーズで最も重要なファイル。

- `insert_basic.py`
  INSERT 文の概念確認用。
  `objects.create()` や `save()` が
  **いつ・どのタイミングで INSERT を発行しているか**を理解するための補助。
  SQL を書き慣れることは目的としない。

- `update_basic.py`
  UPDATE 文の概念確認用。
  WHERE 句の重要性と、
  Django ORM が持つ「安全側に倒した設計」を理解するためのもの。

- `delete_basic.py`
  DELETE 文の概念確認用。
  ORM がなぜ慎重な API 設計になっているのかを、
  **生SQLの危険性と対比して体感する**ための補助。

---

## このフェーズで扱わないこと

以下の内容は、本フェーズでは **意図的に扱わない**。

- JOIN
- GROUP BY / 集計
- インデックス設計
- パフォーマンスチューニング

これらは **④ Form & Validation 完了後** に、
別フェーズとして扱う。

---

## データベースについて

- Django プロジェクトで使用している `db.sqlite3` をそのまま利用する
- ORM と SQL が **完全に同一のデータ**を操作することで、
  両者の対応関係を明確にすることが目的

---

## この構成を採用している理由

- 学習フェーズでは、Django の責務設計を壊さずに
  SQL を自由に試せる「隔離された実験場」が必要
- 本番構成と混同しないため、あえて app 外に配置している
- 本番ではこの構成をそのまま流用しないことを前提としている

---

## 補足（設計メモ）

ORM が書けるから SQL を書かないのではなく、
SQL が分かっているから ORM を正しく信頼できる。

このフォルダは、そのための理解を深めるための学習用スペースである。
